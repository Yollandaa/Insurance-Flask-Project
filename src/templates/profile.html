{% extends 'dashboard_base.html' %} {% block title %} Profile - InsureHub {% endblock %}
{% block profile %}
<h2>Profile Settings</h2>
<section id="profile">
    <div class="container">
        <form method="POST" action="">
            {{ form.hidden_tag() }}

            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                {% if category == 'profile_updated' %}
                <div class="alert alert-success">
                  {{ message }}
                </div>
                {% elif category == 'profile_update_failed' %}
                <div class="alert alert-danger">
                  {{ message }}
                </div>
              {% endif %}
                {% endfor %}
            {% endif %}
            {% endwith %}

            
            <div class="form-group">
              {{ form.username.label }}:
              {{ form.username(class="form-control") }}
              {% for error in form.username.errors %}
              <span class="text-danger">{{ error }}</span>
              {% endfor %}
            </div>
            <div class="form-group">
              {{ form.name.label }}:
              {{ form.name(class="form-control") }}
              {% for error in form.name.errors %}
              <span class="text-danger">{{ error }}</span>
              {% endfor %}
            </div>
            <div class="form-group">
              {{ form.surname.label }}:
              {{ form.surname(class="form-control") }}
              {% for error in form.surname.errors %}
              <span class="text-danger">{{ error }}</span>
              {% endfor %}
            </div>
            <div class="form-group">
                <label for="id_number">ID Number:</label>
                <input type="text" id="id_number" class="form-control" value="{{ user.id_number }}" disabled>
              </div>
            <div class="form-group">
              {{ form.phone_number.label }}:
              {{ form.phone_number(class="form-control") }}
              {% for error in form.phone_number.errors %}
              <span class="text-danger">{{ error }}</span>
              {% endfor %}
            </div>
            <div class="form-group">
              {{ form.email.label }}:
              {{ form.email(class="form-control") }}
              {% for error in form.email.errors %}
              <span class="text-danger">{{ error }}</span>
              {% endfor %}
            </div>
            <div class="form-group">
                {{ form.license_year_issue.label }}:
                {{ form.license_year_issue(class="form-control") }}
                {% for error in form.license_year_issue.errors %}
                <span class="text-danger">{{ error }}</span>
                {% endfor %}
              </div>
              {{form.submit(class="btn btn-primary")}}
          </form>
          

    </div>
</section>
{% endblock %}